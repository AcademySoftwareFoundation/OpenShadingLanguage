shader
test_matrix_v_fromspace_16x_u_float (output color Cout = 0)
{
    string spaces[5] = { "common", "object", "shader", "world", "camera"};
    string fromspace = spaces[int(P[0]*64)%5];

    float uval = raytype("camera");
    matrix m1 = matrix(fromspace, 
        0.100*uval, 0.125*uval, 0.150*uval, 0.175*uval,
        0.200*uval, 0.225*uval, 0.250*uval, 0.275*uval,
        0.300*uval, 0.325*uval, 0.350*uval, 0.375*uval,
        0.400*uval, 0.425*uval, 0.450*uval, 0.475*uval
    );

    

    matrix m2 = m1;
    if (int(P[0]*64)%2==0) {
        m2 = matrix(fromspace, 
            0.400*uval, 0.425*uval, 0.450*uval, 0.475*uval,
            0.300*uval, 0.325*uval, 0.350*uval, 0.375*uval,
            0.200*uval, 0.225*uval, 0.250*uval, 0.275*uval,
            0.100*uval, 0.125*uval, 0.150*uval, 0.175*uval
        );        
    }
    
    Cout = color(m2[0][0] + m2[0][1] + m2[0][2] + m2[0][3],
                 m2[1][0] + m2[1][1] + m2[1][2] + m2[1][3],
                 m2[2][0] + m2[2][1] + m2[2][2] + m2[2][3] +
                 m2[3][0] + m2[3][1] + m2[3][2] + m2[3][3]);
}
